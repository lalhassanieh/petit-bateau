{%- liquid
  comment
    Get the horizontal menu section (header-mega-store) to use its mega_menu links
    Try multiple approaches to find the section
  endcomment
  assign horizontal_menu_section = null
  assign menu_links = null
  assign title = 'Menu'
  assign horizontal_section_st = null
  
  comment Try to find header-mega-store section
  endcomment
  for section_item in sections
    if section_item.type == 'header-mega-store'
      if section_item.settings.mega_menu != blank
        assign horizontal_menu_section = section_item
        assign menu_links = section_item.settings.mega_menu.links
        assign horizontal_section_st = section_item.settings
        break
      endif
    endif
  endfor
  
  comment If not found, try to get from header-group sections
  endcomment
  if horizontal_menu_section == null
    for section_group in section_groups
      for section_item in section_group.sections
        if section_item.type == 'header-mega-store'
          if section_item.settings.mega_menu != blank
            assign horizontal_menu_section = section_item
            assign menu_links = section_item.settings.mega_menu.links
            assign horizontal_section_st = section_item.settings
            break
          endif
        endif
      endfor
    endfor
  endif
  
  if horizontal_section_st != null
    assign theme_st = settings
    assign section_width = horizontal_section_st.section_width | default: 'container'
  else
    assign theme_st = settings
    assign section_width = 'container'
  endif
-%}
{% liquid
  assign enable_rtl = settings.rtl
  assign iso_code = request.locale.iso_code
  assign lis_language_rtl = settings.language_rtl
  if lis_language_rtl != blank
    if lis_language_rtl contains iso_code
      assign enable_rtl = true
    else
      assign enable_rtl = false
    endif
  endif
%}
<div class="verticalmenu-desktop vertical-menu fixed color-default" data-title="{{ title }}">
  <div
    class="navigation vertical"
    {% if horizontal_menu_section != null %}
      style="
        --hot-cl: {{ horizontal_section_st.label_color_hot }};--hot-bg-cl: {{ horizontal_section_st.label_background_hot }};
        --new-cl: {{ horizontal_section_st.label_color_new }};--new-bg-cl: {{ horizontal_section_st.label_background_new }};
        --sale-cl: {{ horizontal_section_st.label_color_sale }};;--sale-bg-cl: {{ horizontal_section_st.label_background_sale }};
        --popular-cl: {{ horizontal_section_st.label_color_popular }};;--popular-bg-cl: {{ horizontal_section_st.label_background_popular }};
        {% if horizontal_section_st.submenu_background %}--gradient-background: {{ horizontal_section_st.submenu_background }};--color-background: {{ horizontal_section_st.submenu_background }};{% endif %}{% if horizontal_section_st.submenu_color %}--color-link: {{ horizontal_section_st.submenu_color }};--color-heading: {{ horizontal_section_st.submenu_color }};{% endif %}
      "
    {% endif %}
  >
    <div class="desktop-menu-content reset-color-on-menu">
      <div class="title-menu-dropdown h-44 w-full align-center block-1025" style="{% if horizontal_section_st != null and horizontal_section_st.menu_mobile_background %}--color-background: {{ horizontal_section_st.menu_mobile_background }};{% else %}--color-background: #002e5e;{% endif %}">
        <div class="toggle-vertical inline-flex pointer align-center gap-10">
          <svg width="18" height="13" viewBox="0 0 18 13" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.5 7.5C1.26562 7.5 1.0638 7.42188 0.894531 7.26562C0.738281 7.09635 0.660156 6.89453 0.660156 6.66016C0.660156 6.4388 0.738281 6.25 0.894531 6.09375C1.0638 5.92448 1.26562 5.83984 1.5 5.83984H16.5C16.7344 5.83984 16.9297 5.92448 17.0859 6.09375C17.2552 6.25 17.3398 6.4388 17.3398 6.66016C17.3398 6.89453 17.2552 7.09635 17.0859 7.26562C16.9297 7.42188 16.7344 7.5 16.5 7.5H1.5ZM1.5 2.5C1.26562 2.5 1.0638 2.42188 0.894531 2.26562C0.738281 2.09635 0.660156 1.89453 0.660156 1.66016C0.660156 1.4388 0.738281 1.25 0.894531 1.09375C1.0638 0.924479 1.26562 0.839844 1.5 0.839844H16.5C16.7344 0.839844 16.9297 0.924479 17.0859 1.09375C17.2552 1.25 17.3398 1.4388 17.3398 1.66016C17.3398 1.89453 17.2552 2.09635 17.0859 2.26562C16.9297 2.42188 16.7344 2.5 16.5 2.5H1.5ZM1.5 12.5C1.26562 12.5 1.0638 12.4219 0.894531 12.2656C0.738281 12.0964 0.660156 11.8945 0.660156 11.6602C0.660156 11.4388 0.738281 11.25 0.894531 11.0938C1.0638 10.9245 1.26562 10.8398 1.5 10.8398H16.5C16.7344 10.8398 16.9297 10.9245 17.0859 11.0938C17.2552 11.25 17.3398 11.4388 17.3398 11.6602C17.3398 11.8945 17.2552 12.0964 17.0859 12.2656C16.9297 12.4219 16.7344 12.5 16.5 12.5H1.5Z" fill="currentColor"/>
          </svg>
          <span style="{% if horizontal_section_st != null and horizontal_section_st.menu_mobile_color %}color: {{ horizontal_section_st.menu_mobile_color }};{% else %}color: #ffffff;{% endif %}">{{ title }}</span>
        </div>
      </div>
      <div class="verticalmenu-html">
        hi
      </div>
    </div>
  </div>
</div>
<div class="vertical-menu-overlay-desktop"></div>
