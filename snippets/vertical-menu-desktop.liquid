{%- liquid
  assign section_st = section.settings
  assign title = section_st.title_categories
  
  comment
    Try to get the horizontal menu section (header-mega-store) to use its mega_menu links
    If not available, fall back to categories_menu from vertical menu section
  endcomment
  assign horizontal_menu_section = null
  assign menu_links = null
  
  for section_item in sections
    if section_item.type == 'header-mega-store' and section_item.settings.mega_menu != blank
      assign horizontal_menu_section = section_item
      assign menu_links = section_item.settings.mega_menu.links
      break
    endif
  endfor
  
  if menu_links == null and section_st.categories_menu != blank
    assign menu_links = section_st.categories_menu.links
  endif
  
  if horizontal_menu_section != null
    assign horizontal_section_st = horizontal_menu_section.settings
    assign theme_st = settings
    assign section_width = horizontal_section_st.section_width
    assign uppercase_first = horizontal_section_st.uppercase_first
  else
    assign horizontal_section_st = section_st
    assign theme_st = settings
    assign section_width = 'container'
    assign uppercase_first = false
  endif
-%}
{% liquid
  assign enable_rtl = settings.rtl
  assign iso_code = request.locale.iso_code
  assign lis_language_rtl = settings.language_rtl
  if lis_language_rtl != blank
    if lis_language_rtl contains iso_code
      assign enable_rtl = true
    else
      assign enable_rtl = false
    endif
  endif
%}
<div class="verticalmenu-desktop vertical-menu fixed color-default" data-title="{{ title }}">
  <div
    class="navigation vertical"
    {% if horizontal_menu_section != null %}
      style="
        --hot-cl: {{ horizontal_section_st.label_color_hot }};--hot-bg-cl: {{ horizontal_section_st.label_background_hot }};
        --new-cl: {{ horizontal_section_st.label_color_new }};--new-bg-cl: {{ horizontal_section_st.label_background_new }};
        --sale-cl: {{ horizontal_section_st.label_color_sale }};;--sale-bg-cl: {{ horizontal_section_st.label_background_sale }};
        --popular-cl: {{ horizontal_section_st.label_color_popular }};;--popular-bg-cl: {{ horizontal_section_st.label_background_popular }};
        {% if horizontal_section_st.submenu_background %}--gradient-background: {{ horizontal_section_st.submenu_background }};--color-background: {{ horizontal_section_st.submenu_background }};{% endif %}{% if horizontal_section_st.submenu_color %}--color-link: {{ horizontal_section_st.submenu_color }};--color-heading: {{ horizontal_section_st.submenu_color }};{% endif %}
      "
    {% endif %}
  >
    <div class="desktop-menu-content reset-color-on-menu">
      <div class="title-menu-dropdown h-44 w-full align-center hidden" style="--color-background: {{ section_st.background_categories }}">
        <div class="toggle-vertical inline-flex pointer align-center gap-10">
          <svg width="18" height="13" viewBox="0 0 18 13" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.5 7.5C1.26562 7.5 1.0638 7.42188 0.894531 7.26562C0.738281 7.09635 0.660156 6.89453 0.660156 6.66016C0.660156 6.4388 0.738281 6.25 0.894531 6.09375C1.0638 5.92448 1.26562 5.83984 1.5 5.83984H16.5C16.7344 5.83984 16.9297 5.92448 17.0859 6.09375C17.2552 6.25 17.3398 6.4388 17.3398 6.66016C17.3398 6.89453 17.2552 7.09635 17.0859 7.26562C16.9297 7.42188 16.7344 7.5 16.5 7.5H1.5ZM1.5 2.5C1.26562 2.5 1.0638 2.42188 0.894531 2.26562C0.738281 2.09635 0.660156 1.89453 0.660156 1.66016C0.660156 1.4388 0.738281 1.25 0.894531 1.09375C1.0638 0.924479 1.26562 0.839844 1.5 0.839844H16.5C16.7344 0.839844 16.9297 0.924479 17.0859 1.09375C17.2552 1.25 17.3398 1.4388 17.3398 1.66016C17.3398 1.89453 17.2552 2.09635 17.0859 2.26562C16.9297 2.42188 16.7344 2.5 16.5 2.5H1.5ZM1.5 12.5C1.26562 12.5 1.0638 12.4219 0.894531 12.2656C0.738281 12.0964 0.660156 11.8945 0.660156 11.6602C0.660156 11.4388 0.738281 11.25 0.894531 11.0938C1.0638 10.9245 1.26562 10.8398 1.5 10.8398H16.5C16.7344 10.8398 16.9297 10.9245 17.0859 11.0938C17.2552 11.25 17.3398 11.4388 17.3398 11.6602C17.3398 11.8945 17.2552 12.0964 17.0859 12.2656C16.9297 12.4219 16.7344 12.5 16.5 12.5H1.5Z" fill="currentColor"/>
          </svg>
          <span>{{ title | default: 'Menu' }}</span>
        </div>
      </div>
      <div class="verticalmenu-html">
        <ul class="list-none verticalmenu-list">
          hi
        </ul>
      </div>
    </div>
  </div>
</div>
<div class="vertical-menu-overlay-desktop"></div>
